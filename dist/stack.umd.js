!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).stack=t()}(this,(function(){"use strict";return function(e={}){let t=[],{type:n,limit:l,onLimit:r}=Object.assign({},{type:"FIFO",limit:!1,onLimit:"update"},e),o="LIFO"===n.toUpperCase(),i=!1;function u(e=1,n=0){let l=[];return n>0&&Array.from({length:n}).map((()=>t.pop())),1==e?t.pop():(Array.from({length:e}).map((()=>{let e=t.pop();null!=e&&l.push(e)})),l)}function f(e=1,n=0){let l=[],r=t.length-n;return e>1&&Array.from({length:e}).map((()=>{null!=t[r-1]&&l.push(t[r-1]),r--})),1==e?t[t.length-1]:l}function c(){}return c.prototype={pull:u,pullReverse:function(e=1,t=0){let n=u(e,t);return n instanceof Array?n.reverse():n},peek:f,peekReverse:function(e=1,t=0){const n=f(e,t);return n instanceof Array?n.reverse():n},getSize:()=>t.length,isEmpty:()=>0==t.length,reset:()=>(t=[],!0),debug:()=>[...t]},c.prototype.push=o?function(e){const n=e instanceof Array,o=n?e.length:1;let f=!1;if("full"!==r||!i){if(l&&n&&o>l&&(e=e.slice(0,-o+l)),l){const o=(n?e.length:1)+t.length;o>=l&&"full"===r&&(e=e.slice(0,-(o-l))),o>=l&&"update"===r&&(f=u(o-l))}return t=e instanceof Array?t.concat(e):t.concat([e]),i=!!l&&t.length===l,f||void 0}}:function(e){const n=e instanceof Array,o=n?e.length:1;let f=!1;if("full"!==r||!i){if(l&&n&&o>l&&(e=e.slice(o-l)),l){const o=(n?e.length:1)+t.length;o>=l&&"full"===r&&(e=e.slice(0,-(o-l))),o>=l&&"update"===r&&(f=u(o-l))}return t=n?e.reduce(((e,t)=>[t,...e]),t):[e].reduce(((e,t)=>[t,...e]),t),i=!!l&&t.length===l,f||void 0}},new c}}));
